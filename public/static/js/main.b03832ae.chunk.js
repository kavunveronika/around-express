(this["webpackJsonparound-react"]=this["webpackJsonparound-react"]||[]).push([[0],{15:function(e,t,a){},16:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a(1),i=a.n(o),c=a(6),r=a.n(c),s=(a(15),a(9)),u=a(2),l=a.p+"static/media/logo.4e8e0a1d.svg";var p=function(){return Object(n.jsx)("header",{className:"header",children:Object(n.jsx)("img",{className:"header__logo",src:l,alt:"Around the US logo"})})};var d=function(){return Object(n.jsx)("footer",{children:Object(n.jsx)("p",{className:"footer__copyright",children:"\xa9 2020. Veronika Bowersock"})})},j=i.a.createContext();var m=function(e){var t=i.a.useContext(j),a=t&&e.card.owner._id===t._id,o="images__delete  ".concat(a?"":"images__delete_hidden"),c=e.card.likes.some((function(e){return t&&e._id===t._id})),r="images__like-button  ".concat(c?"images__like-button_active":"");return Object(n.jsxs)("li",{className:"images__card",children:[Object(n.jsx)("div",{className:"images__picture",style:{backgroundImage:"url(".concat(e.card.link,")")},onClick:function(t){"button"!==t.target.localName&&e.onCardClick(e.card)},children:Object(n.jsx)("button",{className:o,"aria-label":"Delete image",onClick:function(){e.onCardDelete(e.card)}})}),Object(n.jsxs)("div",{className:"images__caption",children:[Object(n.jsx)("p",{className:"images__text",children:e.card.name}),Object(n.jsxs)("div",{className:"images__like",children:[Object(n.jsx)("button",{className:r,"aria-label":"Like image",onClick:function(){e.onCardLike(e.card)}}),Object(n.jsx)("span",{className:"images__like-count",children:e.card.likes.length})]})]})]})};var _=function(e){var t=i.a.useContext(j);return Object(n.jsxs)("main",{className:"main-content",children:[Object(n.jsxs)("section",{className:"profile",children:[Object(n.jsx)("img",{className:"profile__image",src:t&&t.avatar,alt:"profile pic"}),Object(n.jsx)("div",{className:"profile__overlay",onClick:e.onEditAvatar,children:Object(n.jsx)("button",{className:"profile__overlay_button","aria-label":"change avatar"})}),Object(n.jsxs)("div",{className:"profile__description",children:[Object(n.jsxs)("div",{className:"profile__name",children:[Object(n.jsx)("h1",{className:"profile__text",children:t&&t.name}),Object(n.jsx)("button",{className:"profile__edit","aria-label":"Edit profile",onClick:e.onEditProfile})]}),Object(n.jsx)("p",{className:"profile__occupation",children:t&&t.about})]}),Object(n.jsx)("button",{className:"profile__add","aria-label":"Add image",onClick:e.onAddPlace})]}),Object(n.jsx)("section",{className:"images",children:Object(n.jsx)("ul",{className:"images__list",children:e.cards.map((function(t){return Object(n.jsx)(m,{card:t,onCardClick:e.onCardClick,onCardLike:e.onCardLike,onCardDelete:e.onCardDelete},t._id)}))})})]})};var h=function(e){return Object(n.jsx)("div",{className:"popup popup_image ".concat(e.card?"":"popup_hidden"),children:Object(n.jsxs)("div",{className:"popup__content popup__content_fullscreen",children:[Object(n.jsx)("button",{name:"close_button",className:"popup__close popup__close_image","aria-label":"Close popup",onClick:e.onClose}),Object(n.jsx)("img",{className:"images__picture images__picture_fullscreen",src:e.card?e.card.link:"",alt:e.card?e.card.name:""}),Object(n.jsx)("p",{className:"images__text images__text_fullscreen",children:e.card?e.card.name:""})]})})},f=a(7),b=a(8),O=new(function(){function e(t){Object(f.a)(this,e),this.url=t.baseUrl,this.authorization=t.authorization}return Object(b.a)(e,[{key:"getInitialCards",value:function(){return fetch(this.url+"cards",{headers:{authorization:this.authorization}}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"getUserInfo",value:function(){return fetch(this.url+"users/me",{headers:{authorization:this.authorization}}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"updateUserInfo",value:function(e){return fetch(this.url+"users/me",{method:"PATCH",headers:{authorization:this.authorization,"Content-Type":"application/json"},body:JSON.stringify({name:e.name,about:e.about})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"postNewCard",value:function(e){return fetch(this.url+"cards",{method:"POST",headers:{authorization:this.authorization,"Content-Type":"application/json"},body:JSON.stringify({name:e.title,link:e.url})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"deleteCard",value:function(e){return fetch(this.url+"cards/"+e,{method:"DELETE",headers:{authorization:this.authorization,"Content-Type":"application/json"}}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"addLike",value:function(e,t){var a=t?"DELETE":"PUT";return fetch(this.url+"cards/likes/"+e,{method:a,headers:{authorization:this.authorization}}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"updateAvatar",value:function(e){return fetch(this.url+"users/me/avatar",{method:"PATCH",headers:{authorization:this.authorization,"Content-Type":"application/json"},body:JSON.stringify({avatar:e})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}}]),e}())({baseUrl:"https://around.nomoreparties.co/v1/group-5/",authorization:"c3db06be-da70-4990-b8ca-8515a1d7c281"});var v=function(e){var t=e.isOpen?"":"popup_hidden";return Object(n.jsx)("div",{className:"popup popup_form-".concat(e.name," ").concat(t),children:Object(n.jsx)("div",{className:"popup__content",children:Object(n.jsxs)("form",{className:"popup__form popup__form_".concat(e.name),noValidate:!0,onSubmit:e.onSubmit,children:[Object(n.jsx)("button",{name:"close_button",className:"popup__close popup__close_form-".concat(e.name),type:"reset","aria-label":"Close",onClick:e.onClose}),Object(n.jsx)("h2",{className:"popup__title",children:e.title}),e.children]})})})};var x=function(e){var t=i.a.useState(""),a=Object(u.a)(t,2),o=a[0],c=a[1],r=i.a.useState(""),s=Object(u.a)(r,2),l=s[0],p=s[1],d=i.a.useContext(j);return i.a.useEffect((function(){c(d&&d.name),p(d&&d.about)}),[d]),Object(n.jsxs)(v,{onClose:e.onClose,name:"edit",title:"Edit Profile",isOpen:e.isOpen,onSubmit:function(t){t.preventDefault(),e.onUpdateUser({name:o,about:l})},children:[Object(n.jsx)("input",{type:"text",placeholder:"Name",id:"name-input",className:"popup__field popup__field_name",name:"name",value:o||"",required:!0,minLength:2,maxLength:40,onChange:function(e){c(e.target.value)}}),Object(n.jsx)("span",{className:"popup__input-error",id:"name-input-error"}),Object(n.jsx)("input",{type:"text",placeholder:"About",id:"about-input",className:"popup__field popup__field_about",name:"about",value:l||"",required:!0,minLength:2,maxLength:200,onChange:function(e){p(e.target.value)}}),Object(n.jsx)("span",{className:"popup__input-error",id:"about-input-error"}),Object(n.jsx)("input",{type:"submit",className:"popup__save","aria-label":"Save",defaultValue:"Save"})]})};var g=function(e){var t=i.a.useRef("");return Object(n.jsxs)(v,{onClose:e.onClose,name:"avatar",title:"Change profile picture",isOpen:e.isOpen,onSubmit:function(a){a.preventDefault(),e.onUpdateAvatar({avatar:t})},children:[Object(n.jsx)("input",{type:"url",placeholder:"Avatar Link",id:"link-input",name:"link",required:!0,className:"popup__field popup__field_link",ref:t}),Object(n.jsx)("span",{className:"popup__input-error",id:"link-input-error"}),Object(n.jsx)("input",{type:"submit",className:"popup__save","aria-label":"Save",defaultValue:"Save"})]})};var C=function(e){var t=i.a.useState(""),a=Object(u.a)(t,2),o=a[0],c=a[1],r=i.a.useState(""),s=Object(u.a)(r,2),l=s[0],p=s[1];return Object(n.jsxs)(v,{onClose:e.onClose,onSubmit:function(t){t.preventDefault(),e.onAddCard({title:o,url:l})},name:"add",title:"New Place",isOpen:e.isOpen,children:[Object(n.jsx)("input",{type:"text",placeholder:"Title",id:"title-input",required:!0,minLength:1,maxLength:30,name:"name",className:"popup__field popup__field_title",onChange:function(e){c(e.target.value)}}),Object(n.jsx)("span",{className:"popup__input-error",id:"title-input-error"}),Object(n.jsx)("input",{type:"url",placeholder:"Image Link",id:"link-input",name:"link",required:!0,className:"popup__field popup__field_link",onChange:function(e){p(e.target.value)}}),Object(n.jsx)("span",{className:"popup__input-error",id:"link-input-error"}),Object(n.jsx)("input",{type:"submit",className:"popup__save","aria-label":"Save",defaultValue:"Save"})]})};var k=function(){var e=i.a.useState(!1),t=Object(u.a)(e,2),a=t[0],o=t[1],c=i.a.useState(!1),r=Object(u.a)(c,2),l=r[0],m=r[1],f=i.a.useState(!1),b=Object(u.a)(f,2),v=b[0],k=b[1],N=i.a.useState(null),y=Object(u.a)(N,2),S=y[0],E=y[1],P=i.a.useState(null),L=Object(u.a)(P,2),z=L[0],A=L[1],U=i.a.useState([]),T=Object(u.a)(U,2),D=T[0],I=T[1];function w(){k(!1),o(!1),m(!1),E(null)}return i.a.useEffect((function(){O.getInitialCards().then((function(e){I(e)})).catch((function(e){console.log(e)}))}),[]),i.a.useEffect((function(){O.getUserInfo().then((function(e){A(e)})).catch((function(e){console.log(e)}))}),[]),Object(n.jsx)(j.Provider,{value:z,children:Object(n.jsxs)("div",{className:"page",children:[Object(n.jsx)(p,{}),Object(n.jsx)(_,{onEditProfile:function(){o(!0)},onAddPlace:function(){m(!0)},onEditAvatar:function(){k(!0)},onCardClick:function(e){E(e)},cards:D,onCardDelete:function(e){O.deleteCard(e._id).then((function(){var t=D.filter((function(t){return t._id!==e._id}));I(t)})).catch((function(e){console.log(e)}))},onCardLike:function(e){var t=e.likes.some((function(e){return e._id===z._id}));O.addLike(e._id,t).then((function(t){var a=D.map((function(a){return a._id===e._id?t:a}));I(a)})).catch((function(e){console.log(e)}))}}),Object(n.jsx)(x,{isOpen:a,onClose:w,onUpdateUser:function(e){var t=e.name,a=e.about;O.updateUserInfo({name:t,about:a}).then((function(e){A(e)})).catch((function(e){console.log(e)})),w()}}),Object(n.jsx)(C,{isOpen:l,onClose:w,onAddCard:function(e){var t=e.title,a=e.url;O.postNewCard({title:t,url:a}).then((function(e){I([e].concat(Object(s.a)(D)))})).catch((function(e){console.log(e)})),w()}}),Object(n.jsx)(g,{isOpen:v,onClose:w,onUpdateAvatar:function(e){var t=e.avatar;O.updateAvatar(t.current.value).then((function(e){A(e)})).catch((function(e){console.log(e)})),w()}}),Object(n.jsx)(h,{onClose:w,card:S}),Object(n.jsx)(d,{})]})})},N=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,17)).then((function(t){var a=t.getCLS,n=t.getFID,o=t.getFCP,i=t.getLCP,c=t.getTTFB;a(e),n(e),o(e),i(e),c(e)}))};r.a.render(Object(n.jsx)(i.a.StrictMode,{children:Object(n.jsx)(k,{})}),document.getElementById("root")),N()}},[[16,1,2]]]);
//# sourceMappingURL=main.b03832ae.chunk.js.map